// JavaScript autoComplete v1.0.4
// https://github.com/Pixabay/JavaScript-autoComplete
var autoComplete=function(){return function(e){function t(e,t){return e.classList?e.classList.contains(t):new RegExp("\\b"+t+"\\b").test(e.className)}function o(e,t,o){e.attachEvent?e.attachEvent("on"+t,o):e.addEventListener(t,o)}function s(e,t,o){e.detachEvent?e.detachEvent("on"+t,o):e.removeEventListener(t,o)}function n(e,s,n,l){o(l||document,s,function(o){for(var s,l=o.target||o.srcElement;l&&!(s=t(l,e));)l=l.parentElement;s&&n.call(l,o)})}if(document.querySelector){var l={selector:0,source:0,minChars:3,delay:150,offsetLeft:0,offsetTop:1,cache:1,menuClass:"",renderItem:function(e,t){t=t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");var o=new RegExp("("+t.split(" ").join("|")+")","gi");return'<div class="autocomplete-suggestion" data-val="'+e+'">'+e.replace(o,"<b>$1</b>")+"</div>"},onSelect:function(e,t,o){}};for(var a in e)e.hasOwnProperty(a)&&(l[a]=e[a]);for(var c="object"==typeof l.selector?[l.selector]:document.querySelectorAll(l.selector),i=0;i<c.length;i++){var u=c[i];u.sc=document.createElement("div"),u.sc.className="autocomplete-suggestions "+l.menuClass,u.autocompleteAttr=u.getAttribute("autocomplete"),u.setAttribute("autocomplete","off"),u.cache={},u.last_val="",u.updateSC=function(e,t){var o=u.getBoundingClientRect();if(u.sc.style.left=Math.round(o.left+(window.pageXOffset||document.documentElement.scrollLeft)+l.offsetLeft)+"px",u.sc.style.top=Math.round(o.bottom+(window.pageYOffset||document.documentElement.scrollTop)+l.offsetTop)+"px",u.sc.style.width=Math.round(o.right-o.left)+"px",!e&&(u.sc.style.display="block",u.sc.maxHeight||(u.sc.maxHeight=parseInt((window.getComputedStyle?getComputedStyle(u.sc,null):u.sc.currentStyle).maxHeight)),u.sc.suggestionHeight||(u.sc.suggestionHeight=u.sc.querySelector(".autocomplete-suggestion").offsetHeight),u.sc.suggestionHeight))if(t){var s=u.sc.scrollTop,n=t.getBoundingClientRect().top-u.sc.getBoundingClientRect().top;n+u.sc.suggestionHeight-u.sc.maxHeight>0?u.sc.scrollTop=n+u.sc.suggestionHeight+s-u.sc.maxHeight:n<0&&(u.sc.scrollTop=n+s)}else u.sc.scrollTop=0},o(window,"resize",u.updateSC),document.body.appendChild(u.sc),n("autocomplete-suggestion","mouseleave",function(e){var t=u.sc.querySelector(".autocomplete-suggestion.selected");t&&setTimeout(function(){t.className=t.className.replace("selected","")},20)},u.sc),n("autocomplete-suggestion","mouseover",function(e){var t=u.sc.querySelector(".autocomplete-suggestion.selected");t&&(t.className=t.className.replace("selected","")),this.className+=" selected"},u.sc),n("autocomplete-suggestion","mousedown",function(e){if(t(this,"autocomplete-suggestion")){var o=this.getAttribute("data-val");u.value=o,l.onSelect(e,o,this),u.sc.style.display="none"}},u.sc),u.blurHandler=function(){try{e=document.querySelector(".autocomplete-suggestions:hover")}catch(t){var e=0}e?u!==document.activeElement&&setTimeout(function(){u.focus()},20):(u.last_val=u.value,u.sc.style.display="none",setTimeout(function(){u.sc.style.display="none"},350))},o(u,"blur",u.blurHandler);var r=function(e){var t=u.value;if(u.cache[t]=e,e.length&&t.length>=l.minChars){for(var o="",s=0;s<e.length;s++)o+=l.renderItem(e[s],t);u.sc.innerHTML=o,u.updateSC(0)}else u.sc.style.display="none"};u.keydownHandler=function(e){var t=window.event?e.keyCode:e.which;if((40==t||38==t)&&u.sc.innerHTML){var o;return(s=u.sc.querySelector(".autocomplete-suggestion.selected"))?(o=40==t?s.nextSibling:s.previousSibling)?(s.className=s.className.replace("selected",""),o.className+=" selected",u.value=o.getAttribute("data-val")):(s.className=s.className.replace("selected",""),u.value=u.last_val,o=0):((o=40==t?u.sc.querySelector(".autocomplete-suggestion"):u.sc.childNodes[u.sc.childNodes.length-1]).className+=" selected",u.value=o.getAttribute("data-val")),u.updateSC(0,o),!1}if(27==t)u.value=u.last_val,u.sc.style.display="none";else if(13==t||9==t){var s=u.sc.querySelector(".autocomplete-suggestion.selected");s&&"none"!=u.sc.style.display&&(l.onSelect(e,s.getAttribute("data-val"),s),setTimeout(function(){u.sc.style.display="none"},20))}},o(u,"keydown",u.keydownHandler),u.keyupHandler=function(e){var t=window.event?e.keyCode:e.which;if(!t||(t<35||t>40)&&13!=t&&27!=t){var o=u.value;if(o.length>=l.minChars){if(o!=u.last_val){if(u.last_val=o,clearTimeout(u.timer),l.cache){if(o in u.cache)return void r(u.cache[o]);for(var s=1;s<o.length-l.minChars;s++){var n=o.slice(0,o.length-s);if(n in u.cache&&!u.cache[n].length)return void r([])}}u.timer=setTimeout(function(){l.source(o,r)},l.delay)}}else u.last_val=o,u.sc.style.display="none"}},o(u,"keyup",u.keyupHandler),u.composeEndHandler=function(e){var t=u.value;if(t.length>=l.minChars){if(t!=u.last_val){if(u.last_val=t,clearTimeout(u.timer),l.cache){if(t in u.cache)return void r(u.cache[t]);for(var o=1;o<t.length-l.minChars;o++){var s=t.slice(0,t.length-o);if(s in u.cache&&!u.cache[s].length)return void r([])}}u.timer=setTimeout(function(){l.source(t,r)},l.delay)}}else u.last_val=t,u.sc.style.display="none"},(navigator.userAgent.indexOf("iPhone")>=0||navigator.userAgent.indexOf("iPad")>=0)&&o(u,"compositionend",u.composeEndHandler),u.focusHandler=function(e){u.last_val="\n",u.keyupHandler(e)},l.minChars||o(u,"focus",u.focusHandler)}this.destroy=function(){for(var e=0;e<c.length;e++){var t=c[e];s(window,"resize",t.updateSC),s(t,"blur",t.blurHandler),s(t,"focus",t.focusHandler),s(t,"keydown",t.keydownHandler),s(t,"keyup",t.keyupHandler),t.autocompleteAttr?t.setAttribute("autocomplete",t.autocompleteAttr):t.removeAttribute("autocomplete"),document.body.removeChild(t.sc),t=null}}}}}();"function"==typeof define&&define.amd?define("autoComplete",function(){return autoComplete}):"undefined"!=typeof module&&module.exports?module.exports=autoComplete:window.autoComplete=autoComplete;